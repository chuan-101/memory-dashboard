(function (global) {
  'use strict';

  const Jieba = {
    _loaded: false,
    load() {
      this._loaded = true;
      return Promise.resolve();
    },
    cut(text, cutAll) {
      if (!text) {
        return [];
      }
      const tokens = [];
      const parts = text.match(/\p{Script=Han}+|\p{L}+|\p{N}+/gu);
      if (!parts) {
        return text.split('');
      }
      parts.forEach(part => {
        if (cutAll && /\p{Script=Han}+/u.test(part)) {
          tokens.push(...part.split(''));
        } else {
          tokens.push(part);
        }
      });
      return tokens;
    }
  };

  global.jieba = Jieba;
})(typeof window !== 'undefined' ? window : globalThis);
